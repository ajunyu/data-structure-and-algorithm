# 四则运算表达式求值

[逆波兰表示法](https://zh.wikipedia.org/wiki/%E9%80%86%E6%B3%A2%E5%85%B0%E8%A1%A8%E7%A4%BA%E6%B3%95)

[逆波兰表达式/后缀表达式](http://baike.baidu.com/view/552648.htm)

[3.9. Infix, Prefix and Postfix Expressions](http://interactivepython.org/runestone/static/pythonds/BasicDS/InfixPrefixandPostfixExpressions.html)

## 中缀表达式转后缀表达式（栈用来进出运算的符号）

中缀表达式“9+(3-1)*3+10/2”转换为后缀表达式“9 3 1 – 3 * + 10 2 / +”  
规则：从左到右遍历中缀表达式的每个数字和符号，若是数字就输出，即成为后缀表达式的一部分；若是符号，则判断其与栈顶符号的优先级，是右括号或优先级不高于栈顶符号则栈顶元素依次出栈并输出，并将当前符号进栈，一直到最终输出后缀表达式为止。

[如何在程序中将中缀表达式转换为后缀表达式？](https://www.zhihu.com/question/25097763)

1. 输出9，“+”进栈
2. “(”未匹配，进栈
3. 数字3，输出，总表达式为9 3，“-”进栈
4. 数字1，输出，总表达式为9 3 1，后面是符号“)”，此时需要匹配此前的“(”，所以栈顶依次出栈并输出，直到“(”出栈为止，此时左括号上方只有“-”，总表达式为9 3 1 –
5. 紧接着是符号“\*”，此时栈顶符号位“+”，优先级低于“\*”，因此不输出，“\*”进栈，接着是数字3，输出，总表达式为9 3 1 – 3
6. 之后是符号“+”，此时当前栈顶元素“*”比这个“+”优先级高，因此栈中元素出栈并输出（没有比“+”号更低的优先级，所以全部出栈），总表达式为9 3 1 – 3 * +，然后“+”号进栈
7. 然后输出10，总表达式为9 3 1 – 3 * + 10，符号“/”进栈
8. 最后一个数字2，输出，总表达式为9 3 1 – 3 * + 10 2，已经到最后，所以栈中符号全部出栈并输出。最终结果为9 3 1 – 3 * + 10 2 / +

## 后缀表达式计算（栈用来进出运算的数字

后缀表达式“9 3 1 – 3 * + 10 2 / +”  
规则：从左到右遍历表达式的每个数字和符号，遇到数字就进栈，遇到符号，就将处于栈顶的两个数字出栈，然后运算，运算结果进栈，一直到最终结果。

1. 前三个都是数字9、3、1进栈
2. 接下来是“-”号，将栈中的1出栈作为减数，3出栈作为被减数，运算得到2，2进栈
3. 接着数字3进栈，后面是“*”，以为着3和2出栈相乘，得到6，6进栈
4. 下面是“+”，所以6和9出栈，得到15，将15进栈
5. 10和2进栈，接下来是符号“/”，栈顶的2与10出栈，10和2相除，得到5，将5进栈
6. 最后是符号“+”，所以15和5出栈并相加，得到最终结果20，进栈
7. 20出栈